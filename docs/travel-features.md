# امکانات و فیچرهای اپلیکیشن دنگی

تاریخ به‌روزرسانی: ۱۴۰۴/۱۱/۰۳

---

## قالب‌های پروژه

| قالب | کاربرد | ویژگی‌های خاص |
|------|--------|---------------|
| **سفر** | اشتراک هزینه‌های سفر گروهی | تقسیم مساوی/وزنی، دسته‌بندی |
| **ساختمان** | شارژ ماهیانه آپارتمان | دوره زمانی، قواعد شارژ، وزن واحدها |

---

## قالب سفر (Travel Template)

---

## ۱. صفحه اصلی داشبورد (`/project/[projectId]`)

### امکانات:
- **هدر مدرن با گرادیانت آبی**: نمایش نام پروژه و مجموع هزینه‌ها
- **نشان تعداد اعضا**: badge شیشه‌ای در وسط هدر
- **دکمه‌های گرد**: برای بازگشت و تنظیمات
- **موج (Wave)**: در پایین هدر برای ترکیب با بدنه

### کوئیک اکشن‌ها (Quick Actions):
| دکمه | رنگ | مسیر |
|------|-----|------|
| هزینه‌ها | آبی | `/expenses` |
| خلاصه حساب | بنفش | `/summary` |
| ثبت تسویه | سبز | `/add-settlement` |

### بخش اعضا:
- اسکرول افقی با آواتارها
- نشان ستاره طلایی برای مالک پروژه
- شماره‌گذاری برای سایر اعضا
- دکمه افزودن عضو با افکت hover
- **کلیک روی آواتار**: باز شدن پروفایل سریع شرکت‌کننده (Bottom Sheet)

### پروفایل سریع شرکت‌کننده (Bottom Sheet):
| بخش | توضیح |
|-----|-------|
| آواتار و نام | نمایش بزرگ با نشان مالک |
| مانده حساب | طلبکار (سبز) / بدهکار (قرمز) / صفر (خاکستری) |
| کل پرداخت‌ها | مجموع هزینه‌هایی که پرداخت کرده |
| سهم از هزینه‌ها | مجموع سهمی که باید بدهد |
| تعداد تسویه‌ها | تعداد تسویه‌های انجام شده |

### اکشن‌های پروفایل:
| دکمه | عملکرد |
|------|--------|
| ویرایش | رفتن به صفحه مدیریت اعضا |
| انتقال مانده | باز شدن شیت انتقال بدهی/طلب |
| حذف | رفتن به صفحه مدیریت اعضا |

### انتقال مانده حساب:
- انتخاب شرکت‌کننده مقصد
- گزینه حذف شرکت‌کننده بعد از انتقال
- ایجاد خودکار تسویه برای صفر کردن مانده

### هزینه‌های اخیر:
- نمایش ۵ هزینه آخر
- آیکون دسته‌بندی با افکت blur رنگی
- نام، مبلغ و تاریخ فارسی
- لینک به صفحه جزئیات

### تسویه‌های اخیر:
- نمایش ۳ تسویه آخر
- آواتار فرستنده و گیرنده

### سایر:
- دکمه شناور (FAB) برای ثبت هزینه
- Bottom Sheet افزودن عضو

---

## ۲. صفحه ثبت هزینه (`/project/[projectId]/add-expense`)

### فیلدها:
1. **عنوان هزینه** (الزامی)
2. **مبلغ** (الزامی، بزرگتر از صفر)
3. **دسته‌بندی** (انتخابی با آیکون)
4. **پرداخت‌کننده** (انتخاب یک نفر)
5. **شرکت‌کنندگان** (چندگانه با چک‌باکس)
6. **دوره زمانی** (اختیاری برای قالب‌های خاص)

### قابلیت‌ها:
- انتخاب همه شرکت‌کنندگان با یک کلیک
- نمایش سهم هر نفر
- افزودن دسته‌بندی جدید با انتخاب emoji
- پیش‌نمایش تقسیم هزینه

---

## ۳. صفحه جزئیات هزینه (`/project/[projectId]/expense/[expenseId]`)

### حالت‌ها:
- **مشاهده**: نمایش تمام جزئیات
- **ویرایش**: تغییر همه مقادیر

### امکانات:
- ویرایش توسط مالک یا ثبت‌کننده
- حذف با تأیید
- نمایش سهم هر شرکت‌کننده
- آواتارهای شخصی‌شده

---

## ۴. صفحه لیست هزینه‌ها (`/project/[projectId]/expenses`)

### فیلترها:
- جستجو (نام، دسته، پرداخت‌کننده)
- فیلتر دسته‌بندی
- فیلتر پرداخت‌کننده
- فیلتر دوره زمانی

### نمایش:
- خط‌الزمان با جداکننده تاریخ فارسی
- کارت‌های هزینه با آیکون رنگی
- مجموع هزینه‌های فیلترشده
- دکمه FAB برای ثبت جدید

---

## ۵. صفحه خلاصه حساب (`/project/[projectId]/summary`)

### تب "وضعیت هزینه‌ها":
- کارت موازنه برای هر عضو:
  - پرداختی
  - سهم
  - موازنه (طلبکار/بدهکار)
- پیشنهاد تسویه با دکمه سریع
- حالت تسویه‌شده: پیام تبریک

### ویژگی‌ها:
- مرتب‌سازی: طلبکارها اول
- Bottom Sheet تسویه سریع
- آواتارهای دوسویه

---

## ۶. صفحه ثبت تسویه (`/project/[projectId]/add-settlement`)

### فیلدها:
1. **پرداخت‌کننده** (انتخابی)
2. **گیرنده** (انتخابی)
3. **مبلغ** (الزامی)
4. **توضیحات** (اختیاری)
5. **رسید** (آپلود تصویر)

### قابلیت‌ها:
- دکمه جابجایی فرستنده/گیرنده
- پیش‌نمایش بصری انتقال
- آپلود رسید به S3/MinIO
- پیش‌نمایش و نمایش رسید

---

## ۷. صفحه لیست تسویه‌ها (`/project/[projectId]/settlements`)

### امکانات:
- هدر سبز با مجموع تسویه‌ها
- جستجو بر اساس نام یا یادداشت
- دسته‌بندی بر اساس تاریخ فارسی
- کارت با آواتار دوسویه
- دکمه FAB برای ثبت جدید

---

## ۸. صفحه جزئیات تسویه (`/project/[projectId]/settlement/[settlementId]`)

### حالت‌ها:
- مشاهده جزئیات
- ویرایش کامل
- نمایش/آپلود رسید
- حذف با تأیید

---

## ۹. صفحه مدیریت اعضا (`/project/[projectId]/participants`)

### امکانات:
- لیست اعضا با آواتار و نقش
- افزودن عضو جدید:
  - نام
  - وزن (برای تقسیم وزنی)
  - انتخاب یا تولید آواتار
- ویرایش عضو
- حذف عضو (اگر استفاده‌نشده)

### پیکر آواتار:
- دکمه تاس برای تولید تصادفی
- ۸ آواتار پیش‌ساخته

---

## ۱۰. صفحه تنظیمات پروژه (`/project/[projectId]/settings`)

### بخش‌ها:

#### اطلاعات پروژه:
- نام
- توضیحات

#### تنظیمات مالی:
| واحد پول | کد |
|----------|-----|
| تومان | IRR |
| دلار | USD |
| یورو | EUR |
| درهم | AED |
| لیر ترکیه | TRY |

| نوع تقسیم | توضیح |
|-----------|--------|
| مساوی | تقسیم برابر |
| وزنی | بر اساس وزن (مثلاً متراژ) |
| درصدی | بر اساس درصد مشخص |

#### دسته‌بندی‌ها:
- افزودن/حذف دسته
- انتخاب emoji

#### اشتراک‌گذاری:
- کپی لینک دعوت

#### پشتیبان‌گیری:
- دانلود JSON

#### منطقه خطر:
- حذف پروژه (غیرقابل بازگشت)

---

## ویژگی‌های طراحی UI

### رنگ‌بندی:
| بخش | رنگ اصلی |
|-----|----------|
| داشبورد سفر | آبی → نیلی |
| هزینه‌ها | آبی |
| خلاصه حساب | بنفش |
| تسویه‌ها | سبز |
| اعضا | چندرنگ |

### افکت‌ها:
- Glassmorphism (شیشه‌ای)
- Gradient backgrounds
- Blur effects
- Shadow با رنگ
- Hover animations

### کامپوننت‌های مشترک:
- `Card` - کارت با گوشه گرد
- `Button` - دکمه با حالت‌های مختلف
- `BottomSheet` - Modal از پایین
- `Avatar` - آواتار شخصی‌شده
- `Input` - ورودی با label
- `FloatingButton` - دکمه شناور

---

## API Endpoints

| متد | مسیر | توضیح |
|-----|------|-------|
| GET | `/api/projects/[id]` | دریافت پروژه |
| PATCH | `/api/projects/[id]` | ویرایش پروژه |
| DELETE | `/api/projects/[id]` | حذف پروژه |
| GET | `/api/projects/[id]/expenses` | لیست هزینه‌ها |
| POST | `/api/projects/[id]/expenses` | ثبت هزینه |
| GET | `/api/projects/[id]/expenses/[expenseId]` | جزئیات هزینه |
| PATCH | `/api/projects/[id]/expenses/[expenseId]` | ویرایش هزینه |
| DELETE | `/api/projects/[id]/expenses/[expenseId]` | حذف هزینه |
| GET | `/api/projects/[id]/settlements` | لیست تسویه‌ها |
| POST | `/api/projects/[id]/settlements` | ثبت تسویه |
| GET | `/api/projects/[id]/summary` | خلاصه حساب |
| GET | `/api/projects/[id]/participants` | لیست اعضا |
| POST | `/api/projects/[id]/participants` | افزودن عضو |
| GET | `/api/projects/[id]/categories` | لیست دسته‌بندی‌ها |
| POST | `/api/projects/[id]/categories` | افزودن دسته‌بندی |
| POST | `/api/projects/[id]/participants/[participantId]/transfer` | انتقال مانده حساب |

---

## خلاصه امکانات

| قابلیت | وضعیت |
|--------|--------|
| ثبت هزینه | ✅ |
| ویرایش هزینه | ✅ |
| حذف هزینه | ✅ |
| دسته‌بندی هزینه | ✅ |
| ثبت تسویه | ✅ |
| آپلود رسید | ✅ |
| پیشنهاد تسویه | ✅ |
| مدیریت اعضا | ✅ |
| آواتار شخصی | ✅ |
| تقسیم مساوی | ✅ |
| تقسیم وزنی | ✅ |
| تقسیم درصدی | ✅ |
| لینک دعوت | ✅ |
| پشتیبان‌گیری JSON | ✅ |
| تاریخ فارسی | ✅ |
| چند واحد پولی | ✅ |
| جستجو و فیلتر | ✅ |
| حالت تاریک | ✅ |
| پروفایل سریع شرکت‌کننده | ✅ |
| انتقال مانده حساب | ✅ |
| آپلود رسید به S3 | ✅ |
